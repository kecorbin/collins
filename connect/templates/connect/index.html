{% extends "connect/base.html" %}

{% block content %}

<div id="page-wrapper">

    <div class="container-fluid">



        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">
                    Dashboard
                </h1>
{#                <ol class="breadcrumb">#}
{#                    <li class="active">#}
{#                        <i class="fa fa-dashboard"></i> Dashboard#}
{#                    </li>#}
{#                </ol>#}
            </div>
        </div>

        <div class="row">

            <!--Gateway Count Icon -->
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-power-off fa-3x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{ online_gw_count }}</div>
                                <div>Online Gateways</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--CloudServer Count -->
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-power-off fa-3x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{ cloudserver_count }}</div>
                                <div>Online CloudServers</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <!--Available Proxyports Count -->

            <div class="col-lg-2 col-md-6">
                <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-power-off fa-3x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{ cloudserver_count }}</div>
                                <div>Available Ports</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Tunnel Count Icon-->
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-check-circle fa-3x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{ tunnels_procssed_count }}</div>
                                <div>Tunnels Processed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Jobs Status Icon-->
            <div class="col-lg-2 col-lg-6">
                <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-check-circle fa-3x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{ jobs_processed_count }}</div>
                                <div>Jobs Processed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.row -->


        <div class="row">

                    <!--Gateway Count Icon -->
                    <div class="col-lg-2 col-md-6">
                        <div class="panel panel-red">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-warning fa-3x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div class="huge">{{ unhealthy_gw_count }}</div>
                                        <div>Offline Gateways</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Tunnel Count Icon-->
                    <div class="col-lg-2 col-md-6">
                        <div class="panel panel-red">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-warning fa-3x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div class="huge">{{ failed_tunnel_count }}</div>
                                        <div>Failed Tunnels</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Jobs Status Icon-->
                    <div class="col-lg-2 col-md-6">
                        <div class="panel panel-red">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-warning fa-3x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div class="huge">{{ failed_job_count }}</div>
                                        <div>Failed Jobs</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.row -->


     <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">
                    Gateways Requiring Attention
                </h1>
            </div>
        </div>





{% include "connect/gateway_list.html" %}
{% if user.is_superuser %}

    <div class="container-fluid">
         <div class="row" style=width:100%">
            <div class="col-lg-12">
                <h1 class="page-header">
                    Logs
                </h1>
            </div>
        <iframe src="https://papertrailapp.com/groups/1368054/events" style='width:100%; height:600px;border:0'></iframe>
    </div>

{% endif %}

{% endblock %}

